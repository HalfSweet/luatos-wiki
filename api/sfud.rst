sfud - SPI FLASH sfud软件包
===========================

   本页文档由\ `这个文件 <https://gitee.com/openLuat/LuatOS/tree/master/luat/../components/sfud/luat_lib_sfud.c>`__\ 自动生成。如有错误，请提交issue或帮忙修改后pr，谢谢！

sfud.init(spi_id, spi_cs, spi_bandrate)
---------------------------------------

初始化sfud

**参数**

========== ======================
传入值类型 解释
========== ======================
int        spi_id SPI的ID
int        spi_cs SPI的片选
int        spi_bandrate SPI的频率
========== ======================

**返回值**

========== ==========================
返回值类型 解释
========== ==========================
bool       成功返回true,否则返回false
========== ==========================

**例子**

.. code:: lua

   log.info("sfud.init",sfud.init(0,20,20 * 1000 * 1000))

--------------

sfud.get_device_num()
---------------------

获取flash设备信息表中的设备总数

**参数**

无

**返回值**

========== ============
返回值类型 解释
========== ============
int        返回设备总数
========== ============

**例子**

.. code:: lua

   log.info("sfud.get_device_num",sfud.get_device_num())

--------------

sfud.get_device(index)
----------------------

通过flash信息表中的索引获取flash设备

**参数**

========== =========================
传入值类型 解释
========== =========================
int        index flash信息表中的索引
========== =========================

**返回值**

========== ================================
返回值类型 解释
========== ================================
userdata   成功返回一个数据结构,否则返回nil
========== ================================

**例子**

.. code:: lua

   local sfud_device = sfud.get_device(1)

--------------

sfud.get_device_table()
-----------------------

获取flash设备信息表

**参数**

无

**返回值**

========== ================================
返回值类型 解释
========== ================================
userdata   成功返回一个数据结构,否则返回nil
========== ================================

**例子**

.. code:: lua

   local sfud_device = sfud.get_device_table()

--------------

sfud.chip_erase(flash)
----------------------

擦除 Flash 全部数据

**参数**

========== ==========================================================
传入值类型 解释
========== ==========================================================
userdata   flash Flash 设备对象 sfud.get_device_table()返回的数据结构
========== ==========================================================

**返回值**

========== =========
返回值类型 解释
========== =========
int        成功返回0
========== =========

**例子**

.. code:: lua

   sfud.chip_erase(flash)

--------------

.. _sfud.chip_eraseflash-1:

sfud.chip_erase(flash)
----------------------

擦除 Flash 全部数据

**参数**

========== ==========================================================
传入值类型 解释
========== ==========================================================
userdata   flash Flash 设备对象 sfud.get_device_table()返回的数据结构
========== ==========================================================

**返回值**

========== =========
返回值类型 解释
========== =========
int        成功返回0
========== =========

**例子**

.. code:: lua

   sfud.chip_erase(flash)

--------------

sfud.read(flash, addr, size)
----------------------------

读取 Flash 数据

**参数**

========== ==========================================================
传入值类型 解释
========== ==========================================================
userdata   flash Flash 设备对象 sfud.get_device_table()返回的数据结构
int        addr 起始地址
int        size 从起始地址开始读取数据的总大小
========== ==========================================================

**返回值**

========== =================
返回值类型 解释
========== =================
string     data 读取到的数据
========== =================

**例子**

.. code:: lua

   log.info("sfud.read",sfud.read(sfud_device,1024,4))

--------------

sfud.write(flash, addr, size,data)
----------------------------------

向 Flash 写数据

**参数**

========== ==========================================================
传入值类型 解释
========== ==========================================================
userdata   flash Flash 设备对象 sfud.get_device_table()返回的数据结构
int        addr 起始地址
int        size 从起始地址开始读取数据的总大小
string     data 待写入的数据
========== ==========================================================

**返回值**

========== =========
返回值类型 解释
========== =========
int        成功返回0
========== =========

**例子**

.. code:: lua

   log.info("sfud.write",sfud.write(sfud_device,1024,"sfud"))

--------------

sfud.erase_write(flash, addr, size,data)
----------------------------------------

先擦除再往 Flash 写数据

**参数**

========== ==========================================================
传入值类型 解释
========== ==========================================================
userdata   flash Flash 设备对象 sfud.get_device_table()返回的数据结构
int        addr 起始地址
int        size 从起始地址开始读取数据的总大小
string     data 待写入的数据
========== ==========================================================

**返回值**

========== =========
返回值类型 解释
========== =========
int        成功返回0
========== =========

**例子**

.. code:: lua

   log.info("sfud.erase_write",sfud.erase_write(sfud_device,1024,"sfud"))

--------------
